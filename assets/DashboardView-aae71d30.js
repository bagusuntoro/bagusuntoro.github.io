import{S as d,N as h}from"./Navbar-fe6fe40f.js";import{J as _,L as g,K as m,P as u,M as b,r as l,o as v,c as p,j as o,z as f,a as s,t as c,s as n,O as x,Q as w,E as y}from"./index-d101573f.js";import{C as k}from"./ChatMe-ce333ade.js";const S={id:"wrapper"},C={id:"content-wrapper",class:"d-flex flex-column"},D={id:"content"},N={class:"container-fluid mt-4"},I=s("div",{class:"d-sm-flex align-items-center justify-content-between mb-4"},[s("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Dashboard")],-1),L={class:"row mb-3 customIndex"},T={class:"col-xl-6 col-md-6 mb-4"},B={class:"card bg-white mr-2 border-left-info shadow h-100 py-2"},O=s("div",{class:"text-xs text-center font-weight-bold text-info text-uppercase mb-1"}," Rank Petugas ",-1),P={class:"col-xl-6 col-md-6 mb-4"},z={class:"card bg-white mr-2 border-left-warning shadow h-100 py-2"},J=s("div",{class:"text-xs text-center font-weight-bold text-warning text-uppercase mb-1"}," Rank Lokasi ",-1),U={class:"row customIndex"},$={class:"col-xl-3 col-md-6 mb-4"},E={class:"card border-left-primary shadow h-100 py-2"},V={class:"card-body"},j={class:"row no-gutters align-items-center"},A={class:"col mr-2"},K=s("div",{class:"text-xs font-weight-bold text-primary text-uppercase mb-1"}," Lokasi ",-1),M={class:"h5 mb-0 font-weight-bold text-gray-800"},R=s("div",{class:"col-auto"},[s("i",{class:"fas fa-calendar fa-2x text-gray-300"})],-1),W={class:"col-xl-3 col-md-6 mb-4"},F={class:"card border-left-success shadow h-100 py-2"},Q={class:"card-body"},q={class:"row no-gutters align-items-center"},G={class:"col mr-2"},H=s("div",{class:"text-xs font-weight-bold text-success text-uppercase mb-1"}," Tally Sheet ",-1),X={class:"h5 mb-0 font-weight-bold text-gray-800"},Y=s("div",{class:"col-auto"},[s("i",{class:"fas fa-clipboard-list fa-2x text-gray-300"})],-1),Z=s("div",{class:"col-xl-3 col-md-6 mb-4"},[s("div",{class:"card border-left-info shadow h-100 py-2"},[s("div",{class:"card-body"},[s("div",{class:"row no-gutters align-items-center"},[s("div",{class:"col mr-2"},[s("div",{class:"text-xs font-weight-bold text-info text-uppercase mb-1"}," Belum Ditandatangani "),s("div",{class:"row no-gutters align-items-center"},[s("div",{class:"col-auto"},[s("div",{class:"h5 mb-0 mr-3 font-weight-bold text-gray-800"}," 50 ")]),s("div",{class:"col"},[s("div",{class:"progress progress-sm mr-2"},[s("div",{class:"progress-bar bg-info",role:"progressbar",style:{width:"50%"},"aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"})])])])]),s("div",{class:"col-auto"},[s("i",{class:"fas fa-solid fa-check-double fa-2x text-gray-300"})])])])])],-1),ss={class:"col-xl-3 col-md-6 mb-4"},ts={class:"card border-left-warning shadow h-100 py-2"},es={class:"card-body"},os={class:"row no-gutters align-items-center"},as={class:"col mr-2"},is=s("div",{class:"text-xs font-weight-bold text-warning text-uppercase mb-1"}," Pengguna ",-1),rs={class:"h5 mb-0 font-weight-bold text-gray-800"},cs=s("div",{class:"col-auto"},[s("i",{class:"fas fa-solid fa-users fa-2x text-gray-300"})],-1);_.register(g,m,u,b);const ns={data(){return{role:null,lokasi:"",note:"",user:""}},methods:{async dataLokasi(){try{const t=await n.get("https://10.11.10.243/backend/public/api/lokasi");this.lokasi=t.data.data.length,console.log("test lokasi: ",this.lokasi)}catch(t){console.error(t);const e=JSON.stringify(t.message);sessionStorage.setItem("error",e)}},async fetchNote(){try{const t=await n.get(`https://10.11.10.243/backend/public/api/auth/notes-user/${this.user_id}`,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.note=t.data.data.length}catch(t){console.error(t);const e=JSON.stringify(t.message);sessionStorage.setItem("error",e)}},async fetchUser(){try{const t=await n.get("https://10.11.10.243/backend/public/api/auth/user",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.user=t.data.data.length}catch(t){console.error(t);const e=JSON.stringify(t.message);sessionStorage.setItem("error",e)}}},created(){new Date().toUTCString(),console.log("Waktu Sekarang (UTC):",new Date);const t=sessionStorage.getItem("token");if(console.log("test token: ",t),t)try{const e=JSON.parse(atob(t.split(".")[1])),a=e.exp,i=new Date(a*1e3);console.log("Waktu Kedaluwarsa (UTC):",i),new Date>i?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman"),this.role=e.role,this.user_id=e.id,this.role!=="user"&&this.$router.push("/unauthorized"),this.dataLokasi(),this.fetchNote(),this.fetchUser()}catch(e){console.error("Error decoding token:",e),this.$router.push("/")}else this.$router.push("/")}},gs=Object.assign(ns,{__name:"DashboardView",setup(t){const e=l(!1),a=l(""),i=()=>{e.value=!e.value,a.value=e.value?"toggle-sidebar":""};return(r,ls)=>(v(),p("div",S,[o(d,{class:f(a.value)},null,8,["class"]),s("div",C,[s("div",D,[o(h,{onToggleSidebar:i}),s("div",N,[I,o(k),s("div",L,[s("div",T,[s("div",B,[O,o(x)])]),s("div",P,[s("div",z,[J,o(w)])])]),s("div",U,[s("div",$,[s("div",E,[s("div",V,[s("div",j,[s("div",A,[K,s("div",M,c(r.lokasi),1)]),R])])])]),s("div",W,[s("div",F,[s("div",Q,[s("div",q,[s("div",G,[H,s("div",X,c(r.note),1)]),Y])])])]),Z,s("div",ss,[s("div",ts,[s("div",es,[s("div",os,[s("div",as,[is,s("div",rs,c(r.user),1)]),cs])])])])])])]),o(y)])]))}});export{gs as default};
