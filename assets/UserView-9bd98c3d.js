import{_ as D,s as k,o as l,c as i,n as h,a as e,w as _,v as f,G as I,F as y,D as C,t as b,H as L,x as B,y as T,q as w,r as S,j as g,z as x,A as N,g as A,B as M,C as V,S as E,N as K,E as z}from"./index-d101573f.js";import{P as U,D as F}from"./jquery.dataTables-c14926b4.js";const O={data(){return{form:{name:"",kodeData:"",namaData:"",lokasi:"",nik:"",telp:"",email:""},lokasi:[],selectedLokasi:[],reload:!1}},methods:{async dataLokasi(){try{const a=await k.get("https://10.11.10.243/backend/public/api/lokasi");this.lokasi=a.data.data}catch(a){console.error(a)}},handleSubmit(){this.reload=!0;let a=new FormData;a.append("name",this.form.name),a.append("kodeLokasi",this.selectedLokasi.kodeData),a.append("namaLokasi",this.selectedLokasi.namaData),a.append("nik",this.form.nik),a.append("telp",this.form.telp),a.append("email",this.form.email),console.log(a),k.post("https://10.11.10.243/backend/public/api/auth/register",a,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(s=>{this.reload=!1,console.log(s),this.showAlert("Data Berhasil di inputkan!!")}),this.reload=!1,$("#manualModal").modal("hide")},showAlert(a){this.$swal(a).then(()=>{})}},created(){const a=new Date().toUTCString();console.log("Waktu Sekarang (UTC):",a);const s=sessionStorage.getItem("token");if(s)try{const[n,m]=s.split("."),o=JSON.parse(atob(n)),r=atob(m),t=JSON.parse(atob(s.split(".")[1])),p=t.exp,c=new Date(p*1e3);console.log("Waktu Kedaluwarsa (UTC):",c.toUTCString()),new Date>c?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const v=t.role;this.name=t.name,this.alamat=t.alamat,v!=="admin"?this.$router.push("/unauthorized"):(!o||!r)&&(this.$router.push("/"),localStorage.removeItem("token")),this.dataLokasi()}catch(n){console.error("Error decoding token:",n),this.$router.push("/")}else this.$router.push("/")}},d=a=>(B("data-v-deb74a46"),a=a(),T(),a),J={key:0,class:"preloader"},P=d(()=>e("div",{class:"nav-item dropdown no-arrow"},[e("a",{class:"btn blueButton me-2 dropdown-toggle",href:"#",id:"userDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("i",{class:"bi bi-plus"})]),e("div",{class:"dropdown-menu dropdown-menu-right shadow animated--grow-in","aria-labelledby":"userDropdown"},[e("a",{class:"dropdown-item",href:"#","data-toggle":"modal","data-target":"#manualModal"},[e("i",{class:"bi bi-person-fill fa-sm fa-fw mr-2 text-gray-400"}),w(" Manual ")]),e("a",{class:"dropdown-item",href:"#","data-toggle":"modal","data-target":"#excelModal"},[e("i",{class:"bi bi-people-fill fa-sm fa-fw mr-2 text-gray-400"}),w(" Excel ")])])],-1)),W={class:"modal fade",id:"manualModal",tabindex:"-1",role:"dialog","aria-labelledby":"manualModalLabel","aria-hidden":"true"},j={class:"modal-dialog",role:"document"},H={class:"modal-content"},q=d(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"manualModalLabel"},"Manual Input User"),e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")])],-1)),G={class:"modal-body"},Y={enctype:"multipart/form-data"},Q={class:"mb-3"},R=d(()=>e("label",{class:"form-label"},"Nama",-1)),X={class:"mb-3"},Z=d(()=>e("label",{class:"form-label"},"Lokasi",-1)),ee=d(()=>e("option",{disabled:""},"Pilih Lokasi",-1)),te=["value"],ae={class:"mb-3"},se=d(()=>e("label",{class:"form-label"},"NIK",-1)),oe={class:"mb-3"},le=d(()=>e("label",{class:"form-label"},"Telp",-1)),ne={class:"mb-3"},ie=d(()=>e("label",{class:"form-label"},"Email",-1)),de={class:"modal-footer"},re=d(()=>e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Batal ",-1)),ce={class:"modal fade",id:"excelModal",tabindex:"-1",role:"dialog","aria-labelledby":"excelModalLabel","aria-hidden":"true"},ue={class:"modal-dialog",role:"document"},me={class:"modal-content"},he=L('<div class="modal-header" data-v-deb74a46><h5 class="modal-title" id="excelModalLabel" data-v-deb74a46>Import User</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close" data-v-deb74a46><span aria-hidden="true" data-v-deb74a46>×</span></button></div><div class="modal-body" data-v-deb74a46><form data-v-deb74a46><div class="mb-3" data-v-deb74a46><label class="form-label" data-v-deb74a46>File Excel</label><input type="file" class="form-control" id="file" data-v-deb74a46></div></form></div>',2),pe={class:"modal-footer"},_e=d(()=>e("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"}," Batal ",-1));function be(a,s,n,m,o,r){return l(),i(y,null,[o.reload?(l(),i("div",J)):h("",!0),P,e("div",W,[e("div",j,[e("div",H,[q,e("div",G,[e("form",Y,[e("div",Q,[R,_(e("input",{type:"text",class:"form-control",id:"name",placeholder:"input nama","onUpdate:modelValue":s[0]||(s[0]=t=>o.form.name=t)},null,512),[[f,o.form.name]])]),e("div",X,[Z,_(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.selectedLokasi=t),class:"form-select","aria-label":"Default select example"},[ee,(l(!0),i(y,null,C(o.lokasi,t=>(l(),i("option",{key:t.id,value:{kodeData:t.kodeData,namaData:t.namaData}},b(t.namaData),9,te))),128))],512),[[I,o.selectedLokasi]])]),e("div",ae,[se,_(e("input",{type:"number",class:"form-control",id:"nik",placeholder:"input nik","onUpdate:modelValue":s[2]||(s[2]=t=>o.form.nik=t)},null,512),[[f,o.form.nik]])]),e("div",oe,[le,_(e("input",{type:"number",class:"form-control",id:"telp",placeholder:"input telp","onUpdate:modelValue":s[3]||(s[3]=t=>o.form.telp=t)},null,512),[[f,o.form.telp]])]),e("div",ne,[ie,_(e("input",{type:"email",class:"form-control",id:"email",placeholder:"input email","onUpdate:modelValue":s[4]||(s[4]=t=>o.form.email=t)},null,512),[[f,o.form.email]])])])]),e("div",de,[re,e("button",{type:"submit",class:"btn blueButton",onClick:s[5]||(s[5]=(...t)=>r.handleSubmit&&r.handleSubmit(...t))}," Kirim ")])])])]),e("div",ce,[e("div",ue,[e("div",me,[he,e("div",pe,[_e,e("button",{type:"button",class:"btn blueButton",onClick:s[6]||(s[6]=(...t)=>a.updateNote&&a.updateNote(...t))}," Kirim ")])])])])],64)}const fe=D(O,[["render",be],["__scopeId","data-v-deb74a46"]]);const u=a=>(B("data-v-0fd61ae0"),a=a(),T(),a),ge={id:"wrapper"},ke={id:"content-wrapper",class:"d-flex flex-column"},ve={id:"content"},ye=u(()=>e("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Halaman User",-1)),we={class:"row"},Se=u(()=>e("div",{class:"col-1"},null,-1)),xe={class:"col-10"},De={class:"row mt-5"},$e={class:"col-sm-3"},Ce=u(()=>e("div",{class:"col-sm-9"},null,-1)),Be={class:"table-responsive"},Te={key:0,class:"preloader"},Ue=u(()=>e("thead",null,[e("tr",null,[e("th",{scope:"col"},"No"),e("th",{scope:"col"},"Nama"),e("th",{scope:"col"},"Lokasi"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Aksi")])],-1)),Ie={scope:"row"},Le={key:0,class:"bi bi-check-lg text-success"},Ne={key:1,class:"bi bi-x-lg text-danger"},Ae={class:"pe-5"},Me={class:"row"},Ve={class:"col-4"},Ee=["href"],Ke=u(()=>e("i",{class:"fab fa-whatsapp"},null,-1)),ze=[Ke],Fe={class:"col-4"},Oe=["onClick"],Je=u(()=>e("i",{class:"bi bi-trash3"},null,-1)),Pe=[Je],We=u(()=>e("div",{class:"col-1"},null,-1));U.use(F);const je={data(){return{user:[],ready:null}},methods:{async fetchData(){const a=await k.get("https://10.11.10.243/backend/public/api/auth/user",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});this.user=a.data.data,this.ready=!0},confirmDelete(a){E.fire({title:"Konfirmasi",text:"Apakah Anda yakin ingin menghapus item ini?",icon:"warning",showCancelButton:!0,confirmButtonText:"Ya",cancelButtonText:"Tidak"}).then(s=>{s.isConfirmed&&this.deleteItem(a)})},deleteItem(a){k.delete(`https://10.11.10.243/backend/public/api/auth/user/${a}`,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(s=>{console.log(s.data),this.ready=!1,this.fetchData()}).catch(s=>{console.error(s)})}},created(){const a=new Date().toUTCString();console.log("Waktu Sekarang (UTC):",a);const s=sessionStorage.getItem("token");if(s)try{const[n,m]=s.split("."),o=JSON.parse(atob(n)),r=atob(m),t=JSON.parse(atob(s.split(".")[1])),p=t.exp,c=new Date(p*1e3);console.log("Waktu Kedaluwarsa (UTC):",c.toUTCString()),new Date>c?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const v=t.role;this.name=t.name,this.alamat=t.alamat,v!=="admin"?this.$router.push("/unauthorized"):(!o||!r)&&(this.$router.push("/"),sessionStorage.removeItem("token")),this.fetchData()}catch(n){console.error("Error decoding token:",n),this.$router.push("/")}else this.$router.push("/")}},He=Object.assign(je,{__name:"UserView",setup(a){const s=S(!1),n=S(""),m=()=>{s.value=!s.value,n.value=s.value?"toggle-sidebar":""};return(o,r)=>(l(),i("div",ge,[g(N,{class:x(n.value)},null,8,["class"]),e("div",ke,[e("div",ve,[g(K,{onToggleSidebar:m}),ye,e("div",we,[Se,e("div",xe,[e("div",De,[e("div",$e,[g(fe)]),Ce]),e("div",Be,[o.ready?h("",!0):(l(),i("div",Te)),o.ready?(l(),A(V(U),{key:1,class:"display table table-striped"},{default:M(()=>[Ue,e("tbody",null,[(l(!0),i(y,null,C(o.user,(t,p)=>(l(),i("tr",{key:t.id},[e("th",Ie,b(p+1),1),e("td",null,b(t.name),1),e("td",null,b(t.namaLokasi),1),e("td",null,b(t.email),1),e("td",null,[t.status!=="0"?(l(),i("i",Le)):h("",!0),t.status!=="1"?(l(),i("i",Ne)):h("",!0)]),e("td",Ae,[e("div",Me,[e("div",Ve,[e("a",{target:"_blank",href:"https://api.whatsapp.com/send?phone="+t.telp},[e("div",{class:x(["whatsapp-icon",{active:o.showChatBox}]),onClick:r[0]||(r[0]=(...c)=>o.toggleChatBox&&o.toggleChatBox(...c))},ze,2)],8,Ee)]),e("div",Fe,[t.role!="admin"?(l(),i("button",{key:0,onClick:c=>o.confirmDelete(t.id),class:"btn btn-danger customDetail"},Pe,8,Oe)):h("",!0)])])])]))),128))])]),_:1})):h("",!0)])]),We])]),g(z)])]))}}),Ye=D(He,[["__scopeId","data-v-0fd61ae0"]]);export{Ye as default};
