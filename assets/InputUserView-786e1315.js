import{_ as v,r as f,i as g,o as u,c as h,j as c,z as w,A as D,a as e,l as S,w as d,v as m,G as y,F as U,D as I,B as L,s as k,N as T,t as V,q as B,E as C,x as N,y as $}from"./index-d101573f.js";const l=s=>(N("data-v-e7278040"),s=s(),$(),s),x={id:"wrapper"},A={id:"content-wrapper",class:"d-flex flex-column"},K={id:"content"},z=l(()=>e("h1",{class:"h3 mb-0 text-gray-800 text-center"},"Input Data User",-1)),E={class:"row"},F=l(()=>e("div",{class:"col-1"},null,-1)),M={class:"col-10"},O={class:"mb-3"},j=l(()=>e("label",{for:"nama",class:"form-label"},"Nama",-1)),J={class:"mb-3"},P=l(()=>e("label",{for:"nama",class:"form-label"},"Lokasi",-1)),W=l(()=>e("option",{disabled:""},"Pilih Lokasi",-1)),q=["value"],G={class:"mb-3"},H=l(()=>e("label",{for:"nik",class:"form-label"},"NIK",-1)),Q={class:"mb-3"},R=l(()=>e("label",{for:"telp",class:"form-label"},"Telp",-1)),X={class:"mb-3"},Y=l(()=>e("label",{for:"email",class:"form-label"},"Email",-1)),Z=l(()=>e("div",{class:"col-1"},null,-1)),ee={class:"row"},se=l(()=>e("div",{class:"col-1"},null,-1)),ae={class:"col-10"},te={class:"row"},oe={class:"col-6"},le=l(()=>e("div",{class:"col-6"},[e("button",{type:"submit",class:"btn blueButton",style:{float:"right"}}," Kirim ")],-1)),ne=l(()=>e("div",{class:"col-1"},null,-1)),ie={data(){return{form:{name:"",kodeData:"",namaData:"",lokasi:"",nik:"",telp:"",email:"",password:""},lokasi:[],selectedLokasi:[]}},methods:{async dataLokasi(){try{const s=await k.get("https://10.11.10.243/backend/public/api/lokasi");this.lokasi=s.data.data}catch(s){console.error(s)}},handleSubmit(){let s=new FormData;s.append("name",this.form.name),s.append("kodeLokasi",this.selectedLokasi.kodeData),s.append("namaLokasi",this.selectedLokasi.namaData),s.append("nik",this.form.nik),s.append("telp",this.form.telp),s.append("email",this.form.email),s.append("password",this.form.password),console.log(s),k.post("http://localhost:8000/api/auth/register",s,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}}).then(n=>{console.log(n)}),this.form.name="",this.showAlert()},showAlert(){this.$swal("Data Berhasil di inputkan!!").then(()=>{this.$router.push("/admin-users")})}},created(){const s=new Date().toUTCString();console.log("Waktu Sekarang (UTC):",s);const n=sessionStorage.getItem("token");if(n)try{const[i,p]=n.split("."),t=JSON.parse(atob(i)),o=atob(p),r=JSON.parse(atob(n.split(".")[1])),a=r.exp,_=new Date(a*1e3);console.log("Waktu Kedaluwarsa (UTC):",_.toUTCString()),new Date>_?(console.log("Keluar"),sessionStorage.removeItem("token"),this.$router.push("/")):console.log("Aman");const b=r.role;this.name=r.name,this.alamat=r.alamat,b!=="admin"?this.$router.push("/unauthorized"):(!t||!o)&&(this.$router.push("/"),localStorage.removeItem("token")),this.dataLokasi()}catch(i){console.error("Error decoding token:",i),this.$router.push("/")}else this.$router.push("/")}},re=Object.assign(ie,{__name:"InputUserView",setup(s){const n=f(!1),i=f(""),p=()=>{n.value=!n.value,i.value=n.value?"toggle-sidebar":""};return(t,o)=>{const r=g("router-link");return u(),h("div",x,[c(D,{class:w(i.value)},null,8,["class"]),e("div",A,[e("div",K,[c(T,{onToggleSidebar:p}),z,e("form",{onSubmit:o[5]||(o[5]=S((...a)=>t.handleSubmit&&t.handleSubmit(...a),["prevent"])),enctype:"multipart/form-data"},[e("div",E,[F,e("div",M,[e("div",O,[j,d(e("input",{type:"text",class:"form-control",id:"name",placeholder:"input nama","onUpdate:modelValue":o[0]||(o[0]=a=>t.form.name=a)},null,512),[[m,t.form.name]])]),e("div",J,[P,d(e("select",{"onUpdate:modelValue":o[1]||(o[1]=a=>t.selectedLokasi=a),class:"form-select","aria-label":"Default select example"},[W,(u(!0),h(U,null,I(t.lokasi,a=>(u(),h("option",{key:a.id,value:{kodeData:a.kodeData,namaData:a.namaData}},V(a.namaData),9,q))),128))],512),[[y,t.selectedLokasi]])]),e("div",G,[H,d(e("input",{type:"number",class:"form-control",id:"nik",placeholder:"input nik","onUpdate:modelValue":o[2]||(o[2]=a=>t.form.nik=a)},null,512),[[m,t.form.nik]])]),e("div",Q,[R,d(e("input",{type:"number",class:"form-control",id:"telp",placeholder:"input telp","onUpdate:modelValue":o[3]||(o[3]=a=>t.form.telp=a)},null,512),[[m,t.form.telp]])]),e("div",X,[Y,d(e("input",{type:"email",class:"form-control",id:"email",placeholder:"input email","onUpdate:modelValue":o[4]||(o[4]=a=>t.form.email=a)},null,512),[[m,t.form.email]])])]),Z]),e("div",ee,[se,e("div",ae,[e("div",te,[e("div",oe,[c(r,{to:"/admin-users",class:"btn btn-danger mb-5"},{default:L(()=>[B("Kembali")]),_:1})]),le])]),ne])],32)]),c(C)])])}}}),ce=v(re,[["__scopeId","data-v-e7278040"]]);export{ce as default};
